# Vendoring your Dependencies

Vendoring is Go's approach to managing a project's dependencies. A project's dependencies can be placed in a
subfolder called `vendor` inside your project folder, to prevent the compiler from using a possibly outdated
version of a package stored in the user's `$GOPATH`. There are tools to manage the content of the `vendor` folder. 
Gorums uses the [dep](https://github.com/golang/dep) tool to manage its dependencies.

## Vendoring with Gorums

Gorums generates code to be included into your project. However, when using Gorums it may be necessary to vendor
other dependencies into your project's `vendor` folder, including [gorums](https://github.com/relab/gorums).
This is because the code generated by Gorums has external dependencies. Depending on how you organize
your project, there are two options:

1. If your project is a library (that doesn't compile into a binary) to be used by others, 
then you probably don't want to vendor your dependencies into that project.
1. If your project produces a binary, then you may want to vendor your dependencies.

### Examples

#### Raft

The [Raft project](https://github.com/relabs/raft) is an example of a library that isn't compiled into a binary, 
and so doesn't use vendoring. The corresponding Raft key-value storage implementation, that is, the
[rkv project](https://github.com/relabs/rkv), on the other hand does compile to a binary and therefore needs a
`vendor` folder to pin the specific libraries that it depends on. This allows the `rkv` binary to decide which
version of a dependent library is to be used, and not the Raft library itself.

This approach is preferred for projects, where it is foreseen that the library part of the project can be reused
for many different systems, residing in different repositories. However, there is a small challenge with this
approach, because you will need to update both the Raft library (essentially the dependencies in your `$GOPATH`)
and the `rkv` command's dependencies (in the `vendor` folder) at the same time.
However, if the library is stable, then this should not be a problem.

#### ByzQ and RecStore and Other Small Examples

Some projects decide to keep both the "library" parts and the binaries in the same repository. In such cases,
the repository **should vendor** its external dependencies. There are several examples of this repository
organization for some smaller demo applications, such as the [byzq](https://github.com/relabs/byzq) and
[recstore](https://github.com/relabs/recstore) repositories, where both the library code and the command binaries
are in the same repo. 

However, these currently do not vendor their dependencies, even though they probably should. This is just
laziness, and the lack of a specific need among those of us developing on these projects. Should the need
arise, we will introduce vendoring on these projects, or separate out the binaries.
